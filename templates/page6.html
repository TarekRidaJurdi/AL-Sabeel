<!DOCTYPE html>
<html dir="rtl" lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>السبيل</title>
    <link rel="stylesheet" href="static/css/alssabil.css">
    <link rel="stylesheet" href="static/css/all.min.css">
    <link rel="stylesheet" href="static/css/bootstrap.min.css">
    <link rel="stylesheet" href="static/css/bootstrap.min.css.map">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Tajawal:wght@200;300&display=swap" >
    <style>
      .table-container {
    margin-left: 20px; /* زيادة البعد عن الحافة اليسار */
    margin-right: 20px; /* زيادة البعد عن الحافة اليمين */
}
#childTable{
  margin-left: 10px; /* زيادة البعد عن الحافة اليسار */
    margin-right: 10px; /* زيادة البعد عن الحافة اليمين */
}
      #report-container {
        padding: 20px;
        border: 1px solid #ccc;
        border-radius: 10px;
        margin: 20px;
      }
    
      .label-style {
        background-color: #f0f0f0;
        padding: 10px;
        margin-top: 20px;
        border-radius: 5px;
      }
    
      .col-md-3,
      .col-md-4,
      .col-md-6,
      .col-lg-2,
      .col-lg-12 {
        padding: 10px;
      }
    
      .row {
        margin-bottom: 20px;
      }
    </style>
    
  </head>
<body>

<!-- Start User Inform -->
<div class="user-inform pt-4 pb-4" id="userInform">
  <nav class="navbar">
    <div class="container-fluid">
      <div class="navbar-brand d-flex align-items-center "  >
        <button id="main_btn" class="mb-3" onclick="main_interface()"><img src="static/images/logo3.png" class="img-fluid w-75"></button>
        <div class="logo-text p-3 ">
        <h3>جمعية السبيل الخيرية</h3>
        <h6>المحبة هي السبيل</h6>
      </div>
      
      </div>
      
      </div>
      
  </nav>
  <div class="container">
    <div class="container mt-4">
      <div class="row">
          <div class="col-md-6 col-lg-2">
              <input type="text" class="form-control" id="Family_id" placeholder="الرقم المعرف">
          </div>
          
          <div class="col-auto">
              <button class="btn btn-primary" id="show" onclick="show_id()">أظهر بيانات السجل</button>
          </div>
          <!-- إضافة زر الطباعة على اليسار -->
<div class="col-auto">
  <button class="btn btn-secondary" onclick="printReport()">
    <i class="fas fa-print"></i> طباعة التقرير
  </button>
</div>
          
      </div>
      
  </div>
  
</div>

<div id="report-container">
  
</div>

</div>
  
</div>

      <script src="static/js/bootstrap.bundle.min.js"></script>
  <script src="static/js/all.min.js"></script>
  <script src="static/js/alssabil.js"></script> 
  <script>
  
function main_interface()
{
  window.location.href = "/options";
}


function fillform(data) {
  // Fill variables within the report container
  document.getElementById('report-container').innerHTML = `
  <div class="container-fluid">
        <div class="navbar-brand d-flex align-items-center "  >
          <img src="static/images/logo3.png" alt="Logo" width="90" height="90" class="d-inline-block align-text-top">
          <div class="logo-text p-3 ">
          <h3>جمعية السبيل الخيرية</h3>
          <h6>المحبة هي السبيل</h6>
        </div>
        </div>
                </div>
    <h5 class="label-style">العائلة:</h5>
    <div class="row pb-5">
     
      <table>
  <tr>
    <td class="col-md-3 col-lg-2">${data['family']['husband']}</td>
    <td class="col-md-3 col-lg-2">${data['family']['father']}</td>
    <td class="col-md-3 col-lg-2">${data['family']['family']}</td>
    <td class="col-md-3 col-lg-2">${data['family']['birthday']}</td>
    <td class="col-md-3 col-lg-2">${data['family']['nationalNum']}</td>
    <td class="col-md-3 col-lg-6 text-lg-center">${data['family']['job']}</td>
  </tr>
</table>


<table>
  <tr>
    <td class="col-md-3 col-lg-2">${data['family']['wife']}</td>
    <td class="col-md-3 col-lg-2">${data['family']['father-w']}</td>
    <td class="col-md-3 col-lg-2">${data['family']['family-w']}</td>
    <td class="col-md-3 col-lg-2">${data['family']['birthday-w']}</td>
    <td class="col-md-3 col-lg-2">${data['family']['nationalNum-w']}</td>
    <td class="col-md-3 col-lg-6 text-lg-center">${data['family']['job-w']}</td>
  </tr>
</table>
<table  id="childTable">
  <tr>
    <th>الاسم</th>
    <th>المواليد</th>
    <th>العمل</th>
    <th>ملاحظات</th>
  </tr>
</table>

    <h5 class="label-style">العنوان، الإقامة والسكن:</h5>
    <div class="row">
      <table>
  <tr>
    <td class="col-md-3 col-lg-2">${data['family']['state']}</td>
    <td class="col-md-3 col-lg-2">${data['family']['city']}</td>
    <td class="col-md-3 col-lg-2">${data['family']['village']}</td>
    <td class="col-md-3 col-lg-6 text-lg-center">${data['family']['specificPoint']}</td>
  </tr>
</table>
    </div>
    <!-- More data filling can go here -->
    <h5 class="label-style">الحالة الصحية:</h5>
    <div class="row">
        <p>${data['family']['familyHealth']}</p>
      </div>
      <h5 class="label-style">معلومات إضافية:</h5>
    <div class="row">
        <p>${data['family']['additionalInfo']}</p>
      </div>
    <h5 class="label-style">معلومات التواصل:</h5>
    <div class="row">
      <table>
  <tr>
    <td class="col-md-3 col-lg-2">${data['family']['basicMobile']}</td>
    <td class="col-md-3 col-lg-2">${data['family']['alternativeMobile']}</td>
    <td class="col-md-3 col-lg-6 text-lg-center">${data['family']['telephone']}</td>
  </tr>
</table>
    </div>
    <h5 class="label-style">البيانات والإدخال:</h5>
    <div class="row">
      <div class="col-lg-12"> 
        <p>مصدر الحالة: ${data['family']['statusSource']}</p>
      </div>
      <div class="col-lg-12"> 
        <p>تاريخ التسجيل: ${data['family']['regDate']}</p>
      </div>
      <div class="col-lg-12"> 
        <p>مقدم الطلب: ${data['family']['applicant']}</p>
      </div>
      <div class="col-lg-12"> 
        <p>مدخل البيانات: ${data['family']['dataEntrier']}</p>
      </div>
    </div>
    <h5 class="label-style">تقييم مقدم الطلب:</h5>
    <div class="row">
      <div class="col-md-6 col-lg-12"> 
        <p>${data['family']['applicantEvaluation']}</p>
      </div>
    </div>
    <h5 class="label-style">تقييم الدراسات:</h5>
    <div class="row">
        <p>${data['family']['evaluationText']}</p>
      </div>
    <h5 class="label-style">ملاحظات الإدارة:</h5>
    <div class="row">
        <p>${data['family']['managementNotes']}</p>
      </div>
  `;
  
  // تفضيليا، قم بتخزين بيانات الأطفال في متغير JavaScript
  var childData = data['childs'];

  // احصل على جدول الأطفال
  var table = document.getElementById("childTable");

  // ملء الجدول باستخدام بيانات الأطفال
  childData.forEach(function(child) {
    var row = table.insertRow(-1); // إضافة صف جديد إلى الجدول

    // إضافة خلية لكل عمود في الجدول وملئها بالبيانات المناسبة
    var nameCell = row.insertCell(0);
    nameCell.textContent = child['child-name'];

    var birthdayCell = row.insertCell(1);
    birthdayCell.textContent = child['birthday-child'];

    var workCell = row.insertCell(2);
    workCell.textContent = child['study-work'];

    var notesCell = row.insertCell(3);
    notesCell.textContent = child['notes'];
  });

}


function show_id(){
  const Family_id=document.getElementById('Family_id').value;
  const url = "/show_data_to_update?family_id=" + Family_id;

fetch(url)
    .then(response => response.json())
    .then(data => {
        // Call the fillform function with example data
fillform(data);
        
        // يمكنك إضافة أي رمز تحتاجه هنا للانتقال إلى صفحة جديدة بعد استلام البيانات
        //window.location.href = "/page2";
    })
    .catch(error => {
        // في حال حدوث خطأ أثناء الطلب
        console.error('Error fetching data:', error);
    });


}
function printReport() {
  var printContents = document.getElementById('report-container').innerHTML;
  var originalContents = document.body.innerHTML;
  document.body.innerHTML = printContents;
  window.print();
  document.body.innerHTML = originalContents;
}

   </script> 
</body>
